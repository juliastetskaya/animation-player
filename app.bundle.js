!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=(e,t,...n)=>{const r=document.createElement(e);if(void 0!==t){t.split(" ").forEach(e=>r.classList.add(e))}return n.forEach(e=>{"string"!=typeof e?r.appendChild(e):r.appendChild(document.createTextNode(e))}),r};n(1);(new class{constructor(){this.text="Your browser is not supported canvas!",this.speed=10}createButtonsForFrame(){const e=r("button","button button__delete"),t=r("button","button button__copy"),n=[e,t,r("button","button button__move")];return t.addEventListener("click",this.copyFrame.bind(this)),e.addEventListener("click",this.deleteFrame.bind(this)),n.forEach(e=>e.setAttribute("type","button")),n}createFrame(){const e=document.querySelector(".list__frames"),t=e?e.childNodes.length+1:1,n=this.createButtonsForFrame(),a=r("div","number__frame",`${t}`),s=document.querySelector(".canvas--active");s&&s.classList.remove("canvas--active");const i=r("canvas","frame__canvas canvas--active");i.width=200,i.height=200;const o=r("li","frames__item",i,a,...n);return e.append(o),t>1?(e.firstChild.querySelector(".button__delete").style.display="",e.firstChild.querySelector(".button__move").style.display=""):(e.firstChild.querySelector(".button__delete").style.display="none",e.firstChild.querySelector(".button__move").style.display="none"),o}deleteFrame(e){const t=e.target.closest(".frames__item");document.querySelector(".list__frames").removeChild(t);const n=document.querySelector(".canvas");n.getContext("2d").clearRect(0,0,n.width,n.height);const r=document.querySelector(".list__frames");1===r.children.length&&(r.firstChild.querySelector(".button__delete").style.display="none",r.firstChild.querySelector(".button__move").style.display="none"),t.firstChild.matches(".canvas--active")&&r.lastChild.firstChild.classList.add("canvas--active"),this.updateFramesNumbers(),this.setFrame()}copyMainCanvas(){const e=document.querySelector(".canvas"),t=r("canvas","canvas");t.width=500,t.height=500,t.getContext("2d").drawImage(e,0,0),document.querySelector(".page-main").replaceChild(t,e),this.draw()}createNewFrame(){this.createFrame();const e=document.querySelector(".canvas"),t=r("canvas","canvas");t.width=500,t.height=500,document.querySelector(".page-main").replaceChild(t,e),this.draw()}copyFrame(e){const t=this.createFrame(),n=e.target.parentNode.firstChild,r=t.firstChild.getContext("2d");this.copyMainCanvas(),r.drawImage(n,0,0),this.setFrame()}updateFramesNumbers(){[...document.querySelector(".list__frames").children].forEach((e,t)=>{e.querySelector("div").innerHTML=t+1})}render(){const e=r("h1","page-title","CodeJam - Animation Player"),t=r("header","page-header container",e),n=r("canvas","canvas",this.text);n.width=500,n.height=500;const a=r("input");a.setAttribute("type","color"),a.setAttribute("value","#00ff00");const s=r("label","label","Color: ",a),i=r("ul","list__frames");i.addEventListener("click",this.changeActiveFrame.bind(this));const o=r("button","button__new-frame","Add new frame");o.addEventListener("click",this.createNewFrame.bind(this));const c=r("div","frames__wrapper",i,o),d=r("canvas","canvas__animation");d.width=300,d.height=300;const l=r("button","button-fullscreen","Fullscreen");l.setAttribute("type","button"),l.addEventListener("click",()=>{document.querySelector(".canvas__animation").requestFullscreen()});const u=r("input","animation__speed");u.setAttribute("type","range"),u.setAttribute("name","speed"),u.setAttribute("value","10"),u.setAttribute("min","0"),u.setAttribute("max","24");const m=r("span","speed",`${this.speed} FPS`),h=r("label","animation__label","Animation speed: ",m,u),v=r("div","animation__wrapper",d,l,h),f=r("main","page-main container",s,c,n,v);document.body.append(t,f)}changeActiveFrame(e){"canvas"===e.target.tagName.toLowerCase()&&(document.querySelector(".canvas--active").classList.remove("canvas--active"),e.target.classList.add("canvas--active"),this.setFrame())}draw(){let e=!1;const t=document.querySelector(".canvas"),n=t.getContext("2d");t.addEventListener("mousedown",()=>{e=!0}),t.addEventListener("mousemove",t=>{if(e){const e=document.querySelector("input").value;n.fillStyle=e,n.strokeStyle=e,n.lineWidth=20,n.lineTo(t.offsetX,t.offsetY),n.stroke(),n.beginPath(),n.arc(t.offsetX,t.offsetY,10,0,2*Math.PI),n.fill(),n.beginPath(),n.moveTo(t.offsetX,t.offsetY)}}),t.addEventListener("mouseup",()=>{e=!1,n.beginPath(),this.getFrame()})}getFrame(){const e=document.querySelector(".canvas--active").getContext("2d"),t=document.querySelector(".canvas");e.drawImage(t,0,0,500,500,0,0,200,200)}setFrame(){const e=document.querySelector(".canvas--active"),t=document.querySelector(".canvas"),n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),n.drawImage(e,0,0,200,200,0,0,500,500)}startAnimation(){let e,t=0;const n=document.querySelector(".canvas__animation"),r=n.getContext("2d"),a=()=>{if(this.speed>0){const e=[...document.querySelector(".list__frames").children];r.clearRect(0,0,n.width,n.height);const a=e[t%e.length].firstChild;r.drawImage(a,0,0,200,200,0,0,300,300),t+=1}};e=setInterval(()=>a(),1e3/Number(this.speed));const s=document.querySelector(".animation__speed");s.addEventListener("input",()=>{this.speed=s.value,clearInterval(e),e=setInterval(()=>a(),1e3/Number(this.speed)),document.querySelector(".speed").innerHTML=`${this.speed} FRS`})}start(){this.render(),this.createFrame(),this.draw(),this.startAnimation()}}).start()},function(e,t){}]);
//# sourceMappingURL=app.bundle.js.map